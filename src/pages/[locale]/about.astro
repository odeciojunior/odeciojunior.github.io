---
import type { GetStaticPaths } from "astro";
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import { SITE } from "@/config";
import { SUPPORTED_LANGUAGES, type Language } from "@/i18n/config";
import { t } from "@/i18n/utils";

export const getStaticPaths = (() => {
  const paths = [];
  
  for (const language of SUPPORTED_LANGUAGES) {
    // Only add the route for pt-BR since en-US is handled by pages/about.astro (prefixDefaultLocale: false)
    if (language === 'pt-BR') {
      paths.push({
        params: { locale: language },
        props: { locale: language }
      });
    }
  }
  
  return paths;
}) satisfies GetStaticPaths;

const { locale } = Astro.props;
const currentLocale = locale as Language;

// Set current language in Astro.locals
Astro.locals.currentLanguage = currentLocale;
---

<Layout title={`${t(currentLocale, 'about')} | ${SITE.title}`} lang={currentLocale}>
  <Header />
  <main id="main-content">
    <section class="prose mx-auto max-w-4xl px-4 py-8">
      <h1>{t(currentLocale, 'about')}</h1>
      <p>
        {t(currentLocale, 'aboutDescription')}
      </p>
    </section>
  </main>
  <Footer />
</Layout>