---
import type { GetStaticPaths } from "astro";
import { DEFAULT_LANGUAGE } from "@/i18n/config";

// This is a redirect page for old non-localized pagination URLs
// Generate paths for common pagination routes
export const getStaticPaths = (() => {
  // Generate paths for pagination routes (1-20 should cover most cases)
  const paths: { params: { page: string } }[] = [];
  for (let i = 1; i <= 20; i++) {
    paths.push({ params: { page: i.toString() } });
  }
  return paths;
}) satisfies GetStaticPaths;

// Redirect to localized posts page
const page = typeof Astro.params.page === 'string' ? Astro.params.page : '1';
const defaultLocale = DEFAULT_LANGUAGE === 'en-US' ? 'en' : DEFAULT_LANGUAGE === 'pt-BR' ? 'pt' : DEFAULT_LANGUAGE;

return Astro.redirect(page === '1' 
  ? `/${defaultLocale}/posts/`
  : `/${defaultLocale}/posts/${page}/`, 301);
---
